{"version":3,"sources":["../node_modules/eth-block-tracker/src/base.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/json-rpc-random-id/index.js","../node_modules/safe-event-emitter/index.js","../../src/idRemapMiddleware.ts","../../src/createAsyncMiddleware.ts","../../src/createScaffoldMiddleware.ts","../../src/index.ts","../../src/errors.ts","../../src/mergeMiddleware.ts","../node_modules/eth-json-rpc-filters/node_modules/eth-json-rpc-middleware/node_modules/json-rpc-engine/src/createScaffoldMiddleware.js","../node_modules/eth-json-rpc-filters/log-filter.js","../node_modules/eth-json-rpc-filters/node_modules/pify/index.js","../node_modules/eth-json-rpc-filters/base-filter-history.js","../node_modules/eth-json-rpc-filters/block-filter.js","../node_modules/eth-json-rpc-filters/tx-filter.js","../node_modules/async-mutex/es6/Semaphore.js","../node_modules/async-mutex/es6/Mutex.js","../node_modules/async-mutex/es6/withTimeout.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/eth-json-rpc-filters/hexUtils.js","../node_modules/xtend/immutable.js","../index.ts","../../src/classes.ts","../../src/error-constants.ts","../node_modules/eth-json-rpc-filters/base-filter.js","../node_modules/eth-json-rpc-filters/getBlocksForRange.js","../node_modules/eth-block-tracker/src/polling.js","../node_modules/pify/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get.js","../node_modules/eth-query/index.js","../node_modules/eth-json-rpc-filters/index.js","../../src/getUniqueId.ts","../../src/JsonRpcEngine.ts","../node_modules/fast-safe-stringify/index.js","../../src/utils.ts","../node_modules/eth-json-rpc-filters/node_modules/eth-json-rpc-middleware/scaffold.js","../node_modules/eth-json-rpc-filters/subscriptionManager.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/nonIterableSpread.js"],"names":["require","SafeEventEmitter","calculateSum","accumulator","currentValue","blockTrackerEvents","BaseBlockTracker","opts","_blockResetDuration","blockResetDuration","_blockResetTimeout","_currentBlock","_isRunning","_onNewListener","bind","_onRemoveListener","_resetCurrentBlock","_setupInternalEvents","this","Promise","resolve","once","latestBlock","eventName","removeListener","on","handler","includes","_maybeStart","_getBlockTrackerEventCount","_maybeEnd","_cancelBlockResetTimeout","_start","_setupBlockResetTimeout","_end","map","listenerCount","reduce","newBlock","currentBlock","hexToInt","_setCurrentBlock","oldBlock","emit","setTimeout","unref","clearTimeout","hexInt","Number","parseInt","module","exports","getPrototypeOf","object","property","Object","prototype","hasOwnProperty","call","max","MAX_SAFE_INTEGER","idCounter","start","Math","floor","random","util","EventEmitter","R","Reflect","ReflectApply","apply","target","receiver","args","Function","safeApply","context","err","arrayClone","arr","n","copy","Array","i","inherits","type","arguments","length","push","doError","events","_events","undefined","error","er","Error","message","len","listeners","req","res","next","originalId","id","newId","getUniqueId_1","done","asyncMiddleware","end","nextPromise","resolveNextPromise","returnHandlerCallback","nextWasCalled","asyncNext","runReturnHandlersCallback","handlers","method","result","enumerable","get","classes_1","utils_1","errors_1","error_constants_1","getEthJsonRpcError","code","arg","parseOpts","data","getEthProviderError","isArray","rpc","parse","invalidRequest","invalidParams","methodNotFound","internal","server","isInteger","invalidInput","resourceNotFound","resourceUnavailable","transactionRejected","methodNotSupported","limitExceeded","provider","userRejectedRequest","unauthorized","unsupportedMethod","disconnected","chainDisconnected","custom","middlewareStack","engine","JsonRpcEngine_1","forEach","middleware","asMiddleware","EthQuery","pify","BaseFilterWithHistory","bnToHex","incrementHexInt","minBlockRef","blockRefIsNumber","LogFilter","params","ethQuery","assign","fromBlock","toBlock","address","topics","toLowerCase","_fetchLogs","newLogs","addInitialResults","matchingLogs","filter","log","matchLog","addResults","cb","getLogs","blockNumber","normalizedLogAddress","every","topicPattern","index","logTopic","subtopicsToMatch","topic","processFn","fn","options","proxy","unwrapped","arguments_","P","promiseModule","reject","multiArgs","errorFirst","shift","self","filterCache","WeakMap","input","exclude","objectType","TypeError","cache","Proxy","thisArg","cached","pified","excludeMain","set","key","match","pattern","test","desc","getOwnPropertyDescriptor","writableOrConfigurableOwn","writable","configurable","shouldFilter","include","some","allResults","newResults","concat","BaseFilter","getBlocksForRange","BlockFilter","blockBodies","blockHashes","block","hash","TxFilter","blocks","blockTxHashes","transactions","Semaphore","_maxConcurrency","_queue","_value","acquire","_this","locked","isLocked","ticket","r","_dispatch","runExclusive","callback","__awaiter","_a","value","release","__generator","_b","label","sent","trys","_currentReleaser","releaser","nextConsumer","released","Mutex","_semaphore","withTimeout","sync","timeout","timeoutError","isTimeout","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","sortBlockRefs","refs","sort","refA","refB","hexString","intToHex","int","toString","unsafeRandomNibble","sortedRefs","maxBlockRef","bn","blockRef","unsafeRandomBytes","byteCount","source","events_1","EthereumRpcError","serialized","stack","fast_safe_stringify_1","serialize","stringifyReplacer","EthereumProviderError","isValidEthProviderCode","_","standard","updates","default","fromBlockNumber","toBlockNumber","missingBlockNumbers","fill","all","blockNum","query","sendAsync","jsonrpc","PollingBlockTracker","pollingInterval","retryTimeout","keepEventLoopActive","setSkipCacheFlag","_provider","_pollingInterval","_retryTimeout","_keepEventLoopActive","_setSkipCacheFlag","_updateLatestBlock","getLatestBlock","_performSync","catch","newErr","emitErr","console","_fetchLatestBlock","_newPotentialLatest","skipCache","duration","timoutRef","results","unshift","obj","ret","create","x","superPropBase","_get","base","extend","createRandomId","currentProvider","generateFnFor","methodName","slice","pop","generateFnWithDefaultBlockFor","argCount","getBalance","getCode","getTransactionCount","getStorageAt","protocolVersion","syncing","coinbase","mining","hashrate","gasPrice","accounts","getBlockTransactionCountByHash","getBlockTransactionCountByNumber","getUncleCountByBlockHash","getUncleCountByBlockNumber","sign","sendTransaction","sendRawTransaction","estimateGas","getBlockByHash","getBlockByNumber","getTransactionByHash","getTransactionByBlockHashAndIndex","getTransactionByBlockNumberAndIndex","getTransactionReceipt","getUncleByBlockHashAndIndex","getUncleByBlockNumberAndIndex","getCompilers","compileLLL","compileSolidity","compileSerpent","newFilter","newBlockFilter","newPendingTransactionFilter","uninstallFilter","getFilterChanges","getFilterLogs","getWork","submitWork","submitHashrate","response","createAsyncMiddleware","createJsonRpcMiddleware","toFilterCreationMiddleware","createFilterFn","toAsyncRpcMiddleware","asyncFn","objValues","values","blockTracker","filterIndex","filters","mutex","waitForFree","releaseLock","mutexMiddlewareWrapper","eth_newFilter","newLogFilter","eth_newBlockFilter","eth_newPendingTransactionFilter","eth_uninstallFilter","uninstallFilterHandler","eth_getFilterChanges","eth_getFilterLogs","filterUpdater","update","destroy","uninstallAllFilters","installFilter","filterIndexHex","getChangesAndClear","getAllResults","Boolean","prevFilterCount","initialize","idHex","newFilterCount","updateBlockTrackerSubs","__exportStar","JsonRpcEngine","_middleware","_handleBatch","_handle","_promiseHandle","_runAllMiddleware","middlewareError","isComplete","returnHandlers","_runReturnHandlers","handlerCallback","reqs","responses","_err","callerReq","eth_rpc_errors_1","request","_processRequest","_checkForCompletion","_runMiddleware","reverse","returnHandler","jsonify","safe_event_emitter_1","JSON","stringify","stable","deterministicStringify","stableStringify","replacerStack","defaultOptions","depthLimit","edgesLimit","replacer","spacer","decirc","val","k","edgeIndex","parent","depth","setReplace","keys","replaceGetterValues","part","defineProperty","replace","propertyDescriptor","compareFunction","a","b","tmp","deterministicDecirc","toJSON","v","splice","FALLBACK_ERROR_CODE","FALLBACK_MESSAGE","FALLBACK_ERROR","getMessageFromCode","fallbackMessage","codeString","hasKey","isJsonRpcServerError","isValidCode","assignOriginalError","fallbackError","shouldIncludeStack","_error","originalError","createScaffoldMiddleware","createFilterMiddleware","normalizeBlock","parentHash","sha3Uncles","miner","stateRoot","transactionsRoot","receiptsRoot","logsBloom","difficulty","number","gasLimit","gasUsed","nonce","mixHash","timestamp","extraData","subscriptions","filterManager","isDestroyed","eth_subscribe","eth_unsubscribe","removeAllListeners","createSubNewHeads","createSubFromFilter","subId","_emitSubscriptionResult","subscriptionType","sub","rawBlocks","filterParams","subscription","filterIdHex","arrayLikeToArray","iter","Symbol","iterator","from"],"mappings":"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","file":"static/js/0.dfd2db9d.chunk.js","sourcesContent":["const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst SafeEventEmitter = require('safe-event-emitter')\n\nconst sec = 1000\n\nconst calculateSum = (accumulator, currentValue) => accumulator + currentValue\nconst blockTrackerEvents = ['sync', 'latest']\n\nclass BaseBlockTracker extends SafeEventEmitter {\n\n  //\n  // public\n  //\n\n  constructor (opts = {}) {\n    super()\n    // config\n    this._blockResetDuration = opts.blockResetDuration || 20 * sec\n    // state\n    this._blockResetTimeout\n    this._currentBlock = null\n    this._isRunning = false\n    // bind functions for internal use\n    this._onNewListener = this._onNewListener.bind(this)\n    this._onRemoveListener = this._onRemoveListener.bind(this)\n    this._resetCurrentBlock = this._resetCurrentBlock.bind(this)\n    // listen for handler changes\n    this._setupInternalEvents()\n  }\n\n  isRunning () {\n    return this._isRunning\n  }\n\n  getCurrentBlock () {\n    return this._currentBlock\n  }\n\n  async getLatestBlock () {\n    // return if available\n    if (this._currentBlock) return this._currentBlock\n    // wait for a new latest block\n    const latestBlock = await new Promise(resolve => this.once('latest', resolve))\n    // return newly set current block\n    return latestBlock\n  }\n\n  // dont allow module consumer to remove our internal event listeners\n  removeAllListeners (eventName) {\n    // perform default behavior, preserve fn arity\n    if (eventName) {\n      super.removeAllListeners(eventName)\n    } else {\n      super.removeAllListeners()\n    }\n    // re-add internal events\n    this._setupInternalEvents()\n    // trigger stop check just in case\n    this._onRemoveListener()\n  }\n\n  //\n  // to be implemented in subclass\n  //\n\n  _start () {\n    // default behavior is noop\n  }\n\n  _end () {\n    // default behavior is noop\n  }\n\n  //\n  // private\n  //\n\n  _setupInternalEvents () {\n    // first remove listeners for idempotence\n    this.removeListener('newListener', this._onNewListener)\n    this.removeListener('removeListener', this._onRemoveListener)\n    // then add them\n    this.on('newListener', this._onNewListener)\n    this.on('removeListener', this._onRemoveListener)\n  }\n\n  _onNewListener (eventName, handler) {\n    // `newListener` is called *before* the listener is added\n    if (!blockTrackerEvents.includes(eventName)) return\n    this._maybeStart()\n  }\n\n  _onRemoveListener (eventName, handler) {\n    // `removeListener` is called *after* the listener is removed\n    if (this._getBlockTrackerEventCount() > 0) return\n    this._maybeEnd()\n  }\n\n  _maybeStart () {\n    if (this._isRunning) return\n    this._isRunning = true\n    // cancel setting latest block to stale\n    this._cancelBlockResetTimeout()\n    this._start()\n  }\n\n  _maybeEnd () {\n    if (!this._isRunning) return\n    this._isRunning = false\n    this._setupBlockResetTimeout()\n    this._end()\n  }\n\n  _getBlockTrackerEventCount () {\n    return blockTrackerEvents\n      .map(eventName => this.listenerCount(eventName))\n      .reduce(calculateSum)\n  }\n\n  _newPotentialLatest (newBlock) {\n    const currentBlock = this._currentBlock\n    // only update if blok number is higher\n    if (currentBlock && (hexToInt(newBlock) <= hexToInt(currentBlock))) return\n    this._setCurrentBlock(newBlock)\n  }\n\n  _setCurrentBlock (newBlock) {\n    const oldBlock = this._currentBlock\n    this._currentBlock = newBlock\n    this.emit('latest', newBlock)\n    this.emit('sync', { oldBlock, newBlock })\n  }\n\n  _setupBlockResetTimeout () {\n    // clear any existing timeout\n    this._cancelBlockResetTimeout()\n    // clear latest block when stale\n    this._blockResetTimeout = setTimeout(this._resetCurrentBlock, this._blockResetDuration)\n    // nodejs - dont hold process open\n    if (this._blockResetTimeout.unref) {\n      this._blockResetTimeout.unref()\n    }\n  }\n\n  _cancelBlockResetTimeout () {\n    clearTimeout(this._blockResetTimeout)\n  }\n\n  _resetCurrentBlock () {\n    this._currentBlock = null\n  }\n\n}\n\nmodule.exports = BaseBlockTracker\n\nfunction hexToInt(hexInt) {\n  return Number.parseInt(hexInt, 16)\n}\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","module.exports = IdIterator\n\nfunction IdIterator(opts){\n  opts = opts || {}\n  var max = opts.max || Number.MAX_SAFE_INTEGER\n  var idCounter = typeof opts.start !== 'undefined' ? opts.start : Math.floor(Math.random() * max)\n\n  return function createRandomId () {\n    idCounter = idCounter % max\n    return idCounter++\n  }\n\n}","const util = require('util')\nconst EventEmitter = require('events/')\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n}\n\nmodule.exports = SafeEventEmitter\n\n\nfunction SafeEventEmitter() {\n  EventEmitter.call(this)\n}\n\nutil.inherits(SafeEventEmitter, EventEmitter)\n\nSafeEventEmitter.prototype.emit = function (type) {\n  // copied from https://github.com/Gozala/events/blob/master/events.js\n  // modified lines are commented with \"edited:\"\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    // edited: using safeApply\n    safeApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      // edited: using safeApply\n      safeApply(listeners[i], this, args);\n  }\n\n  return true;\n}\n\nfunction safeApply(handler, context, args) {\n  try {\n    ReflectApply(handler, context, args)\n  } catch (err) {\n    // throw error after timeout so as not to interupt the stack\n    setTimeout(() => {\n      throw err\n    })\n  }\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n",null,null,null,null,null,null,"module.exports = function createScaffoldMiddleware (handlers) {\n  return (req, res, next, end) => {\n    const handler = handlers[req.method]\n    // if no handler, return\n    if (handler === undefined) {\n      return next()\n    }\n    // if handler is fn, call as middleware\n    if (typeof handler === 'function') {\n      return handler(req, res, next, end)\n    }\n    // if handler is some other value, use as result\n    res.result = handler\n    return end()\n  }\n}\n","const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst BaseFilterWithHistory = require('./base-filter-history')\nconst { bnToHex, hexToInt, incrementHexInt, minBlockRef, blockRefIsNumber } = require('./hexUtils')\n\nclass LogFilter extends BaseFilterWithHistory {\n\n  constructor ({ provider, params }) {\n    super()\n    this.type = 'log'\n    this.ethQuery = new EthQuery(provider)\n    this.params = Object.assign({\n      fromBlock: 'latest',\n      toBlock: 'latest',\n      address: undefined,\n      topics: [],\n    }, params)\n    // normalize address parameter\n    if (this.params.address) {\n      // ensure array\n      if (!Array.isArray(this.params.address)) {\n        this.params.address = [this.params.address]\n      }\n      // ensure lowercase\n      this.params.address = this.params.address.map(address => address.toLowerCase())\n    }\n  }\n\n  async initialize({ currentBlock }) {\n    // resolve params.fromBlock\n    let fromBlock = this.params.fromBlock\n    if (['latest', 'pending'].includes(fromBlock)) fromBlock = currentBlock\n    if ('earliest' === fromBlock) fromBlock = '0x0'\n    this.params.fromBlock = fromBlock\n    // set toBlock for initial lookup\n    const toBlock = minBlockRef(this.params.toBlock, currentBlock)\n    const params = Object.assign({}, this.params, { toBlock })\n    // fetch logs and add to results\n    const newLogs = await this._fetchLogs(params)\n    this.addInitialResults(newLogs)\n  }\n\n  async update ({ oldBlock, newBlock }) {\n    // configure params for this update\n    const toBlock = newBlock\n    let fromBlock\n    // oldBlock is empty on first sync\n    if (oldBlock) {\n      fromBlock = incrementHexInt(oldBlock)\n    } else {\n      fromBlock = newBlock\n    }\n    // fetch logs\n    const params = Object.assign({}, this.params, { fromBlock, toBlock })\n    const newLogs = await this._fetchLogs(params)\n    const matchingLogs = newLogs.filter(log => this.matchLog(log))\n\n    // add to results\n    this.addResults(matchingLogs)\n  }\n\n  async _fetchLogs (params) {\n    const newLogs = await pify(cb => this.ethQuery.getLogs(params, cb))()\n    // add to results\n    return newLogs\n  }\n\n  matchLog(log) {\n    // check if block number in bounds:\n    if (hexToInt(this.params.fromBlock) >= hexToInt(log.blockNumber)) return false\n    if (blockRefIsNumber(this.params.toBlock) && hexToInt(this.params.toBlock) <= hexToInt(log.blockNumber)) return false\n\n    // address is correct:\n    const normalizedLogAddress = log.address && log.address.toLowerCase()\n    if (this.params.address && normalizedLogAddress && !this.params.address.includes(normalizedLogAddress)) return false\n\n    // topics match:\n    // topics are position-dependant\n    // topics can be nested to represent `or` [[a || b], c]\n    // topics can be null, representing a wild card for that position\n    const topicsMatch = this.params.topics.every((topicPattern, index) => {\n      // pattern is longer than actual topics\n      let logTopic = log.topics[index]\n      if (!logTopic) return false\n      logTopic = logTopic.toLowerCase()\n      // normalize subTopics\n      let subtopicsToMatch = Array.isArray(topicPattern) ? topicPattern : [topicPattern]\n      // check for wild card\n      const subtopicsIncludeWildcard = subtopicsToMatch.includes(null)\n      if (subtopicsIncludeWildcard) return true\n      subtopicsToMatch = subtopicsToMatch.map(topic => topic.toLowerCase())\n      // check each possible matching topic\n      const topicDoesMatch = subtopicsToMatch.includes(logTopic)\n      return topicDoesMatch\n    })\n\n    return topicsMatch\n  }\n\n}\n\nmodule.exports = LogFilter\n","'use strict';\n\nconst processFn = (fn, options, proxy, unwrapped) => function (...arguments_) {\n\tconst P = options.promiseModule;\n\n\treturn new P((resolve, reject) => {\n\t\tif (options.multiArgs) {\n\t\t\targuments_.push((...result) => {\n\t\t\t\tif (options.errorFirst) {\n\t\t\t\t\tif (result[0]) {\n\t\t\t\t\t\treject(result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.shift();\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (options.errorFirst) {\n\t\t\targuments_.push((error, result) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targuments_.push(resolve);\n\t\t}\n\n\t\tconst self = this === proxy ? unwrapped : this;\n\t\tReflect.apply(fn, self, arguments_);\n\t});\n};\n\nconst filterCache = new WeakMap();\n\nmodule.exports = (input, options) => {\n\toptions = {\n\t\texclude: [/.+(?:Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise,\n\t\t...options\n\t};\n\n\tconst objectType = typeof input;\n\tif (!(input !== null && (objectType === 'object' || objectType === 'function'))) {\n\t\tthrow new TypeError(`Expected \\`input\\` to be a \\`Function\\` or \\`Object\\`, got \\`${input === null ? 'null' : objectType}\\``);\n\t}\n\n\tconst filter = (target, key) => {\n\t\tlet cached = filterCache.get(target);\n\n\t\tif (!cached) {\n\t\t\tcached = {};\n\t\t\tfilterCache.set(target, cached);\n\t\t}\n\n\t\tif (key in cached) {\n\t\t\treturn cached[key];\n\t\t}\n\n\t\tconst match = pattern => (typeof pattern === 'string' || typeof key === 'symbol') ? key === pattern : pattern.test(key);\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(target, key);\n\t\tconst writableOrConfigurableOwn = (desc === undefined || desc.writable || desc.configurable);\n\t\tconst included = options.include ? options.include.some(match) : !options.exclude.some(match);\n\t\tconst shouldFilter = included && writableOrConfigurableOwn;\n\t\tcached[key] = shouldFilter;\n\t\treturn shouldFilter;\n\t};\n\n\tconst cache = new WeakMap();\n\n\tconst proxy = new Proxy(input, {\n\t\tapply(target, thisArg, args) {\n\t\t\tconst cached = cache.get(target);\n\n\t\t\tif (cached) {\n\t\t\t\treturn Reflect.apply(cached, thisArg, args);\n\t\t\t}\n\n\t\t\tconst pified = options.excludeMain ? target : processFn(target, options, proxy, target);\n\t\t\tcache.set(target, pified);\n\t\t\treturn Reflect.apply(pified, thisArg, args);\n\t\t},\n\n\t\tget(target, key) {\n\t\t\tconst property = target[key];\n\n\t\t\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\t\t\tif (!filter(target, key) || property === Function.prototype[key]) {\n\t\t\t\treturn property;\n\t\t\t}\n\n\t\t\tconst cached = cache.get(property);\n\n\t\t\tif (cached) {\n\t\t\t\treturn cached;\n\t\t\t}\n\n\t\t\tif (typeof property === 'function') {\n\t\t\t\tconst pified = processFn(property, options, proxy, target);\n\t\t\t\tcache.set(property, pified);\n\t\t\t\treturn pified;\n\t\t\t}\n\n\t\t\treturn property;\n\t\t}\n\t});\n\n\treturn proxy;\n};\n","const BaseFilter = require('./base-filter')\n\n// tracks all results ever recorded\nclass BaseFilterWithHistory extends BaseFilter {\n\n  constructor () {\n    super()\n    this.allResults = []\n  }\n\n  async update () {\n    throw new Error('BaseFilterWithHistory - no update method specified')\n  }\n\n  addResults (newResults) {\n    this.allResults = this.allResults.concat(newResults)\n    super.addResults(newResults)\n  }\n\n  addInitialResults (newResults) {\n    this.allResults = this.allResults.concat(newResults)\n    super.addInitialResults(newResults)\n  }\n\n  getAllResults () {\n    return this.allResults\n  }\n\n}\n\nmodule.exports = BaseFilterWithHistory","const BaseFilter = require('./base-filter')\nconst getBlocksForRange = require('./getBlocksForRange')\nconst { incrementHexInt } = require('./hexUtils')\n\nclass BlockFilter extends BaseFilter {\n\n  constructor ({ provider, params }) {\n    super()\n    this.type = 'block'\n    this.provider = provider\n  }\n\n  async update ({ oldBlock, newBlock }) {\n    const toBlock = newBlock\n    const fromBlock = incrementHexInt(oldBlock)\n    const blockBodies = await getBlocksForRange({ provider: this.provider, fromBlock, toBlock })\n    const blockHashes = blockBodies.map((block) => block.hash)\n    this.addResults(blockHashes)\n  }\n\n}\n\nmodule.exports = BlockFilter\n","const BaseFilter = require('./base-filter')\nconst getBlocksForRange = require('./getBlocksForRange')\nconst { incrementHexInt } = require('./hexUtils')\n\nclass TxFilter extends BaseFilter {\n\n  constructor ({ provider }) {\n    super()\n    this.type = 'tx'\n    this.provider = provider\n  }\n\n  async update ({ oldBlock }) {\n    const toBlock = oldBlock\n    const fromBlock = incrementHexInt(oldBlock)\n    const blocks = await getBlocksForRange({ provider: this.provider, fromBlock, toBlock })\n    const blockTxHashes = []\n    for (const block of blocks) {\n      blockTxHashes.push(...block.transactions)\n    }\n    // add to results\n    this.addResults(blockTxHashes)\n  }\n\n}\n\nmodule.exports = TxFilter\n","import { __awaiter, __generator } from \"tslib\";\nvar Semaphore = /** @class */ (function () {\n    function Semaphore(_maxConcurrency) {\n        this._maxConcurrency = _maxConcurrency;\n        this._queue = [];\n        if (_maxConcurrency <= 0) {\n            throw new Error('semaphore must be initialized to a positive value');\n        }\n        this._value = _maxConcurrency;\n    }\n    Semaphore.prototype.acquire = function () {\n        var _this = this;\n        var locked = this.isLocked();\n        var ticket = new Promise(function (r) { return _this._queue.push(r); });\n        if (!locked)\n            this._dispatch();\n        return ticket;\n    };\n    Semaphore.prototype.runExclusive = function (callback) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, value, release;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.acquire()];\n                    case 1:\n                        _a = _b.sent(), value = _a[0], release = _a[1];\n                        _b.label = 2;\n                    case 2:\n                        _b.trys.push([2, , 4, 5]);\n                        return [4 /*yield*/, callback(value)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        release();\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Semaphore.prototype.isLocked = function () {\n        return this._value <= 0;\n    };\n    Semaphore.prototype.release = function () {\n        if (this._maxConcurrency > 1) {\n            throw new Error('this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead');\n        }\n        if (this._currentReleaser) {\n            var releaser = this._currentReleaser;\n            this._currentReleaser = undefined;\n            releaser();\n        }\n    };\n    Semaphore.prototype._dispatch = function () {\n        var _this = this;\n        var nextConsumer = this._queue.shift();\n        if (!nextConsumer)\n            return;\n        var released = false;\n        this._currentReleaser = function () {\n            if (released)\n                return;\n            released = true;\n            _this._value++;\n            _this._dispatch();\n        };\n        nextConsumer([this._value--, this._currentReleaser]);\n    };\n    return Semaphore;\n}());\nexport default Semaphore;\n","import { __awaiter, __generator } from \"tslib\";\nimport Semaphore from './Semaphore';\nvar Mutex = /** @class */ (function () {\n    function Mutex() {\n        this._semaphore = new Semaphore(1);\n    }\n    Mutex.prototype.acquire = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, releaser;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this._semaphore.acquire()];\n                    case 1:\n                        _a = _b.sent(), releaser = _a[1];\n                        return [2 /*return*/, releaser];\n                }\n            });\n        });\n    };\n    Mutex.prototype.runExclusive = function (callback) {\n        return this._semaphore.runExclusive(function () { return callback(); });\n    };\n    Mutex.prototype.isLocked = function () {\n        return this._semaphore.isLocked();\n    };\n    Mutex.prototype.release = function () {\n        this._semaphore.release();\n    };\n    return Mutex;\n}());\nexport default Mutex;\n","import { __awaiter, __generator } from \"tslib\";\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function withTimeout(sync, timeout, timeoutError) {\n    var _this = this;\n    if (timeoutError === void 0) { timeoutError = new Error('timeout'); }\n    return {\n        acquire: function () {\n            return new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n                var isTimeout, ticket, release;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            isTimeout = false;\n                            setTimeout(function () {\n                                isTimeout = true;\n                                reject(timeoutError);\n                            }, timeout);\n                            return [4 /*yield*/, sync.acquire()];\n                        case 1:\n                            ticket = _a.sent();\n                            if (isTimeout) {\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\n                                release();\n                            }\n                            else {\n                                resolve(ticket);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        },\n        runExclusive: function (callback) {\n            return __awaiter(this, void 0, void 0, function () {\n                var release, ticket;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            release = function () { return undefined; };\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 7, 8]);\n                            return [4 /*yield*/, this.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n                            release = ticket[1];\n                            return [4 /*yield*/, callback(ticket[0])];\n                        case 3: return [2 /*return*/, _a.sent()];\n                        case 4:\n                            release = ticket;\n                            return [4 /*yield*/, callback()];\n                        case 5: return [2 /*return*/, _a.sent()];\n                        case 6: return [3 /*break*/, 8];\n                        case 7:\n                            release();\n                            return [7 /*endfinally*/];\n                        case 8: return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        release: function () {\n            sync.release();\n        },\n        isLocked: function () { return sync.isLocked(); },\n    };\n}\n","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","\nmodule.exports = {\n  minBlockRef,\n  maxBlockRef,\n  sortBlockRefs,\n  bnToHex,\n  blockRefIsNumber,\n  hexToInt,\n  incrementHexInt,\n  intToHex,\n  unsafeRandomBytes,\n}\n\nfunction minBlockRef(...refs) {\n  const sortedRefs = sortBlockRefs(refs)\n  return sortedRefs[0]\n}\n\nfunction maxBlockRef(...refs) {\n  const sortedRefs = sortBlockRefs(refs)\n  return sortedRefs[sortedRefs.length-1]\n}\n\nfunction sortBlockRefs(refs) {\n  return refs.sort((refA, refB) => {\n    if (refA === 'latest' || refB === 'earliest') return 1\n    if (refB === 'latest' || refA === 'earliest') return -1\n    return hexToInt(refA) - hexToInt(refB)\n  })\n}\n\nfunction bnToHex(bn) {\n  return '0x' + bn.toString(16)\n}\n\nfunction blockRefIsNumber(blockRef){\n  return blockRef && !['earliest', 'latest', 'pending'].includes(blockRef)\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  let hexString = int.toString(16)\n  const needsLeftPad = hexString.length % 2\n  if (needsLeftPad) hexString = '0' + hexString\n  return '0x' + hexString\n}\n\nfunction unsafeRandomBytes(byteCount) {\n  let result = '0x'\n  for (let i = 0; i < byteCount; i++) {\n    result += unsafeRandomNibble()\n    result += unsafeRandomNibble()\n  }\n  return result\n}\n\nfunction unsafeRandomNibble() {\n  return Math.floor(Math.random() * 16).toString(16)\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n",null,null,null,"const SafeEventEmitter = require('@metamask/safe-event-emitter').default\n\nclass BaseFilter extends SafeEventEmitter {\n\n  constructor () {\n    super()\n    this.updates = []\n  }\n\n  async initialize () {}\n\n  async update () {\n    throw new Error('BaseFilter - no update method specified')\n  }\n\n  addResults (newResults) {\n    this.updates = this.updates.concat(newResults)\n    newResults.forEach(result => this.emit('update', result))\n  }\n\n  addInitialResults (newResults) {}\n\n  getChangesAndClear () {\n    const updates = this.updates\n    this.updates = []\n    return updates\n  }\n  \n}\n\nmodule.exports = BaseFilter\n","module.exports = getBlocksForRange\n\nasync function getBlocksForRange({ provider, fromBlock, toBlock }) {\n  if (!fromBlock) fromBlock = toBlock\n\n  const fromBlockNumber = hexToInt(fromBlock)\n  const toBlockNumber = hexToInt(toBlock)\n  const blockCountToQuery = toBlockNumber - fromBlockNumber + 1\n  // load all blocks from old to new (inclusive)\n  const missingBlockNumbers = Array(blockCountToQuery).fill()\n                              .map((_,index) => fromBlockNumber + index)\n                              .map(intToHex)\n  const blockBodies = await Promise.all(\n    missingBlockNumbers.map(blockNum => query(provider, 'eth_getBlockByNumber', [blockNum, false]))\n  )\n  return blockBodies\n}\n\nfunction hexToInt(hexString) {\n  if (hexString === undefined || hexString === null) return hexString\n  return Number.parseInt(hexString, 16)\n}\n\nfunction incrementHexInt(hexString){\n  if (hexString === undefined || hexString === null) return hexString\n  const value = hexToInt(hexString)\n  return intToHex(value + 1)\n}\n\nfunction intToHex(int) {\n  if (int === undefined || int === null) return int\n  const hexString = int.toString(16)\n  return '0x' + hexString\n}\n\nfunction query(provider, method, params) {\n  return new Promise((resolve, reject) => {\n    provider.sendAsync({ id: 1, jsonrpc: '2.0', method, params }, (err, res) => {\n      if (err) return reject(err)\n      resolve(res.result)\n    })\n  })\n}\n","const pify = require('pify')\nconst BaseBlockTracker = require('./base')\n\nconst sec = 1000\n\nclass PollingBlockTracker extends BaseBlockTracker {\n\n  constructor (opts = {}) {\n    // parse + validate args\n    if (!opts.provider) throw new Error('PollingBlockTracker - no provider specified.')\n    const pollingInterval = opts.pollingInterval || 20 * sec\n    const retryTimeout = opts.retryTimeout || pollingInterval / 10\n    const keepEventLoopActive = opts.keepEventLoopActive !== undefined ? opts.keepEventLoopActive : true\n    const setSkipCacheFlag = opts.setSkipCacheFlag || false\n    // BaseBlockTracker constructor\n    super(Object.assign({\n      blockResetDuration: pollingInterval,\n    }, opts))\n    // config\n    this._provider = opts.provider\n    this._pollingInterval = pollingInterval\n    this._retryTimeout = retryTimeout\n    this._keepEventLoopActive = keepEventLoopActive\n    this._setSkipCacheFlag = setSkipCacheFlag\n  }\n\n  //\n  // public\n  //\n\n  // trigger block polling\n  async checkForLatestBlock () {\n    await this._updateLatestBlock()\n    return await this.getLatestBlock()\n  }\n\n  //\n  // private\n  //\n\n  _start () {\n    this._performSync().catch(err => this.emit('error', err))\n  }\n\n  async _performSync () {\n    while (this._isRunning) {\n      try {\n        await this._updateLatestBlock()\n        await timeout(this._pollingInterval, !this._keepEventLoopActive)\n      } catch (err) {\n        const newErr = new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\\n${err.stack}`)\n        try {\n          this.emit('error', newErr)\n        } catch (emitErr) {\n          console.error(newErr)\n        }\n        await timeout(this._retryTimeout, !this._keepEventLoopActive)\n      }\n    }\n  }\n\n  async _updateLatestBlock () {\n    // fetch + set latest block\n    const latestBlock = await this._fetchLatestBlock()\n    this._newPotentialLatest(latestBlock)\n  }\n\n  async _fetchLatestBlock () {\n    const req = { jsonrpc: \"2.0\", id: 1, method: 'eth_blockNumber', params: [] }\n    if (this._setSkipCacheFlag) req.skipCache = true\n    const res = await pify((cb) => this._provider.sendAsync(req, cb))()\n    if (res.error) throw new Error(`PollingBlockTracker - encountered error fetching block:\\n${res.error}`)\n    return res.result\n  }\n\n}\n\nmodule.exports = PollingBlockTracker\n\nfunction timeout (duration, unref) {\n  return new Promise(resolve => {\n    const timoutRef = setTimeout(resolve, duration)\n    // don't keep process open\n    if (timoutRef.unref && unref) {\n      timoutRef.unref()\n    }\n  })\n}\n","'use strict';\n\nconst processFn = (fn, opts) => function () {\n\tconst P = opts.promiseModule;\n\tconst args = new Array(arguments.length);\n\n\tfor (let i = 0; i < arguments.length; i++) {\n\t\targs[i] = arguments[i];\n\t}\n\n\treturn new P((resolve, reject) => {\n\t\tif (opts.errorFirst) {\n\t\t\targs.push(function (err, result) {\n\t\t\t\tif (opts.multiArgs) {\n\t\t\t\t\tconst results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i - 1] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tresults.unshift(err);\n\t\t\t\t\t\treject(results);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(results);\n\t\t\t\t\t}\n\t\t\t\t} else if (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targs.push(function (result) {\n\t\t\t\tif (opts.multiArgs) {\n\t\t\t\t\tconst results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(results);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfn.apply(this, args);\n\t});\n};\n\nmodule.exports = (obj, opts) => {\n\topts = Object.assign({\n\t\texclude: [/.+(Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise\n\t}, opts);\n\n\tconst filter = key => {\n\t\tconst match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\t\treturn opts.include ? opts.include.some(match) : !opts.exclude.some(match);\n\t};\n\n\tlet ret;\n\tif (typeof obj === 'function') {\n\t\tret = function () {\n\t\t\tif (opts.excludeMain) {\n\t\t\t\treturn obj.apply(this, arguments);\n\t\t\t}\n\n\t\t\treturn processFn(obj, opts).apply(this, arguments);\n\t\t};\n\t} else {\n\t\tret = Object.create(Object.getPrototypeOf(obj));\n\t}\n\n\tfor (const key in obj) { // eslint-disable-line guard-for-in\n\t\tconst x = obj[key];\n\t\tret[key] = typeof x === 'function' && filter(key) ? processFn(x, opts) : x;\n\t}\n\n\treturn ret;\n};\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","const extend = require('xtend')\nconst createRandomId = require('json-rpc-random-id')()\n\nmodule.exports = EthQuery\n\n\nfunction EthQuery(provider){\n  const self = this\n  self.currentProvider = provider\n}\n\n//\n// base queries\n//\n\n// default block\nEthQuery.prototype.getBalance =                          generateFnWithDefaultBlockFor(2, 'eth_getBalance')\nEthQuery.prototype.getCode =                             generateFnWithDefaultBlockFor(2, 'eth_getCode')\nEthQuery.prototype.getTransactionCount =                 generateFnWithDefaultBlockFor(2, 'eth_getTransactionCount')\nEthQuery.prototype.getStorageAt =                        generateFnWithDefaultBlockFor(3, 'eth_getStorageAt')\nEthQuery.prototype.call =                                generateFnWithDefaultBlockFor(2, 'eth_call')\n// standard\nEthQuery.prototype.protocolVersion =                     generateFnFor('eth_protocolVersion')\nEthQuery.prototype.syncing =                             generateFnFor('eth_syncing')\nEthQuery.prototype.coinbase =                            generateFnFor('eth_coinbase')\nEthQuery.prototype.mining =                              generateFnFor('eth_mining')\nEthQuery.prototype.hashrate =                            generateFnFor('eth_hashrate')\nEthQuery.prototype.gasPrice =                            generateFnFor('eth_gasPrice')\nEthQuery.prototype.accounts =                            generateFnFor('eth_accounts')\nEthQuery.prototype.blockNumber =                         generateFnFor('eth_blockNumber')\nEthQuery.prototype.getBlockTransactionCountByHash =      generateFnFor('eth_getBlockTransactionCountByHash')\nEthQuery.prototype.getBlockTransactionCountByNumber =    generateFnFor('eth_getBlockTransactionCountByNumber')\nEthQuery.prototype.getUncleCountByBlockHash =            generateFnFor('eth_getUncleCountByBlockHash')\nEthQuery.prototype.getUncleCountByBlockNumber =          generateFnFor('eth_getUncleCountByBlockNumber')\nEthQuery.prototype.sign =                                generateFnFor('eth_sign')\nEthQuery.prototype.sendTransaction =                     generateFnFor('eth_sendTransaction')\nEthQuery.prototype.sendRawTransaction =                  generateFnFor('eth_sendRawTransaction')\nEthQuery.prototype.estimateGas =                         generateFnFor('eth_estimateGas')\nEthQuery.prototype.getBlockByHash =                      generateFnFor('eth_getBlockByHash')\nEthQuery.prototype.getBlockByNumber =                    generateFnFor('eth_getBlockByNumber')\nEthQuery.prototype.getTransactionByHash =                generateFnFor('eth_getTransactionByHash')\nEthQuery.prototype.getTransactionByBlockHashAndIndex =   generateFnFor('eth_getTransactionByBlockHashAndIndex')\nEthQuery.prototype.getTransactionByBlockNumberAndIndex = generateFnFor('eth_getTransactionByBlockNumberAndIndex')\nEthQuery.prototype.getTransactionReceipt =               generateFnFor('eth_getTransactionReceipt')\nEthQuery.prototype.getUncleByBlockHashAndIndex =         generateFnFor('eth_getUncleByBlockHashAndIndex')\nEthQuery.prototype.getUncleByBlockNumberAndIndex =       generateFnFor('eth_getUncleByBlockNumberAndIndex')\nEthQuery.prototype.getCompilers =                        generateFnFor('eth_getCompilers')\nEthQuery.prototype.compileLLL =                          generateFnFor('eth_compileLLL')\nEthQuery.prototype.compileSolidity =                     generateFnFor('eth_compileSolidity')\nEthQuery.prototype.compileSerpent =                      generateFnFor('eth_compileSerpent')\nEthQuery.prototype.newFilter =                           generateFnFor('eth_newFilter')\nEthQuery.prototype.newBlockFilter =                      generateFnFor('eth_newBlockFilter')\nEthQuery.prototype.newPendingTransactionFilter =         generateFnFor('eth_newPendingTransactionFilter')\nEthQuery.prototype.uninstallFilter =                     generateFnFor('eth_uninstallFilter')\nEthQuery.prototype.getFilterChanges =                    generateFnFor('eth_getFilterChanges')\nEthQuery.prototype.getFilterLogs =                       generateFnFor('eth_getFilterLogs')\nEthQuery.prototype.getLogs =                             generateFnFor('eth_getLogs')\nEthQuery.prototype.getWork =                             generateFnFor('eth_getWork')\nEthQuery.prototype.submitWork =                          generateFnFor('eth_submitWork')\nEthQuery.prototype.submitHashrate =                      generateFnFor('eth_submitHashrate')\n\n// network level\n\nEthQuery.prototype.sendAsync = function(opts, cb){\n  const self = this\n  self.currentProvider.sendAsync(createPayload(opts), function(err, response){\n    if (!err && response.error) err = new Error('EthQuery - RPC Error - '+response.error.message)\n    if (err) return cb(err)\n    cb(null, response.result)\n  })\n}\n\n// util\n\nfunction generateFnFor(methodName){\n  return function(){\n    const self = this\n    var args = [].slice.call(arguments)\n    var cb = args.pop()\n    self.sendAsync({\n      method: methodName,\n      params: args,\n    }, cb)\n  }\n}\n\nfunction generateFnWithDefaultBlockFor(argCount, methodName){\n  return function(){\n    const self = this\n    var args = [].slice.call(arguments)\n    var cb = args.pop()\n    // set optional default block param\n    if (args.length < argCount) args.push('latest')\n    self.sendAsync({\n      method: methodName,\n      params: args,\n    }, cb)\n  }\n}\n\nfunction createPayload(data){\n  return extend({\n    // defaults\n    id: createRandomId(),\n    jsonrpc: '2.0',\n    params: [],\n    // user-specified\n  }, data)\n}\n","const Mutex = require('async-mutex').Mutex\nconst { createAsyncMiddleware } = require('json-rpc-engine')\nconst createJsonRpcMiddleware = require('eth-json-rpc-middleware/scaffold')\nconst LogFilter = require('./log-filter.js')\nconst BlockFilter = require('./block-filter.js')\nconst TxFilter = require('./tx-filter.js')\nconst { intToHex, hexToInt } = require('./hexUtils')\n\nmodule.exports = createEthFilterMiddleware\n\nfunction createEthFilterMiddleware({ blockTracker, provider }) {\n\n  // create filter collection\n  let filterIndex = 0\n  let filters = {}\n  // create update mutex\n  const mutex = new Mutex()\n  const waitForFree = mutexMiddlewareWrapper({ mutex })\n\n  const middleware = createJsonRpcMiddleware({\n    // install filters\n    eth_newFilter:                   waitForFree(toFilterCreationMiddleware(newLogFilter)),\n    eth_newBlockFilter:              waitForFree(toFilterCreationMiddleware(newBlockFilter)),\n    eth_newPendingTransactionFilter: waitForFree(toFilterCreationMiddleware(newPendingTransactionFilter)),\n    // uninstall filters\n    eth_uninstallFilter:             waitForFree(toAsyncRpcMiddleware(uninstallFilterHandler)),\n    // checking filter changes\n    eth_getFilterChanges:            waitForFree(toAsyncRpcMiddleware(getFilterChanges)),\n    eth_getFilterLogs:               waitForFree(toAsyncRpcMiddleware(getFilterLogs)),\n  })\n\n  // setup filter updating and destroy handler\n  const filterUpdater = async ({ oldBlock, newBlock }) => {\n    if (filters.length === 0) return\n    // lock update reads\n    const releaseLock = await mutex.acquire()\n    try {\n      // process all filters in parallel\n      await Promise.all(objValues(filters).map(async (filter) => {\n        try {\n         await filter.update({ oldBlock, newBlock })\n        } catch (err) {\n          // handle each error individually so filter update errors don't affect other filters\n          console.error(err)\n        }\n      }))\n    } catch (err) {\n      // log error so we don't skip the releaseLock\n      console.error(err)\n    }\n    // unlock update reads\n    releaseLock()\n  }\n\n  // expose filter methods directly\n  middleware.newLogFilter = newLogFilter\n  middleware.newBlockFilter = newBlockFilter\n  middleware.newPendingTransactionFilter = newPendingTransactionFilter\n  middleware.uninstallFilter = uninstallFilterHandler\n  middleware.getFilterChanges = getFilterChanges\n  middleware.getFilterLogs = getFilterLogs\n\n  // expose destroy method for cleanup\n  middleware.destroy = () => {\n    uninstallAllFilters()\n  }\n\n  return middleware\n\n  //\n  // new filters\n  //\n\n  async function newLogFilter(params) {\n    const filter = new LogFilter({ provider, params })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  async function newBlockFilter() {\n    const filter = new BlockFilter({ provider })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  async function newPendingTransactionFilter() {\n    const filter = new TxFilter({ provider })\n    const filterIndex = await installFilter(filter)\n    return filter\n  }\n\n  //\n  // get filter changes\n  //\n\n  async function getFilterChanges(filterIndexHex) {\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    if (!filter) {\n      throw new Error(`No filter for index \"${filterIndex}\"`)\n    }\n    const results = filter.getChangesAndClear()\n    return results\n  }\n\n  async function getFilterLogs(filterIndexHex) {\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    if (!filter) {\n      throw new Error(`No filter for index \"${filterIndex}\"`)\n    }\n    // only return results for log filters\n    if (filter.type === 'log') {\n      results = filter.getAllResults()\n    } else {\n      results = []\n    }\n    return results\n  }\n\n\n  //\n  // remove filters\n  //\n\n\n  async function uninstallFilterHandler(filterIndexHex) {\n    // check filter exists\n    const filterIndex = hexToInt(filterIndexHex)\n    const filter = filters[filterIndex]\n    const result = Boolean(filter)\n    // uninstall filter\n    if (result) {\n      await uninstallFilter(filterIndex)\n    }\n    return result\n  }\n\n  //\n  // utils\n  //\n\n  async function installFilter(filter) {\n    const prevFilterCount = objValues(filters).length\n    // install filter\n    const currentBlock = await blockTracker.getLatestBlock()\n    await filter.initialize({ currentBlock })\n    filterIndex++\n    filters[filterIndex] = filter\n    filter.id = filterIndex\n    filter.idHex = intToHex(filterIndex)\n    // update block tracker subs\n    const newFilterCount = objValues(filters).length\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount })\n    return filterIndex\n  }\n\n  async function uninstallFilter(filterIndex) {\n    const prevFilterCount = objValues(filters).length\n    delete filters[filterIndex]\n    // update block tracker subs\n    const newFilterCount = objValues(filters).length\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount })\n  }\n\n  async function uninstallAllFilters() {\n    const prevFilterCount = objValues(filters).length\n    filters = {}\n    // update block tracker subs\n    updateBlockTrackerSubs({ prevFilterCount, newFilterCount: 0 })\n  }\n\n  function updateBlockTrackerSubs({ prevFilterCount, newFilterCount }) {\n    // subscribe\n    if (prevFilterCount === 0 && newFilterCount > 0) {\n      blockTracker.on('sync', filterUpdater)\n      return\n    }\n    // unsubscribe\n    if (prevFilterCount > 0 && newFilterCount === 0) {\n      blockTracker.removeListener('sync', filterUpdater)\n      return\n    }\n  }\n\n}\n\n// helper for turning filter constructors into rpc middleware\nfunction toFilterCreationMiddleware(createFilterFn) {\n  return toAsyncRpcMiddleware(async (...args) => {\n    const filter = await createFilterFn(...args)\n    const result = intToHex(filter.id)\n    return result\n  })\n}\n\n// helper for pulling out req.params and setting res.result\nfunction toAsyncRpcMiddleware(asyncFn) {\n  return createAsyncMiddleware(async (req, res) => {\n    const result = await asyncFn.apply(null, req.params)\n    res.result = result\n  })\n}\n\nfunction mutexMiddlewareWrapper({ mutex }) {\n  return (middleware) => {\n    return async (req, res, next, end) => {\n      // wait for mutex available\n      // we can release immediately because\n      // we just need to make sure updates aren't active\n      const releaseLock = await mutex.acquire()\n      releaseLock()\n      middleware(req, res, next, end)\n    }\n  }\n}\n\nfunction objValues(obj, fn){\n  const values = []\n  for (let key in obj) {\n    values.push(obj[key])\n  }\n  return values\n}\n",null,null,"module.exports = stringify\nstringify.default = stringify\nstringify.stable = deterministicStringify\nstringify.stableStringify = deterministicStringify\n\nvar LIMIT_REPLACE_NODE = '[...]'\nvar CIRCULAR_REPLACE_NODE = '[Circular]'\n\nvar arr = []\nvar replacerStack = []\n\nfunction defaultOptions () {\n  return {\n    depthLimit: Number.MAX_SAFE_INTEGER,\n    edgesLimit: Number.MAX_SAFE_INTEGER\n  }\n}\n\n// Regular stringify\nfunction stringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  decirc(obj, '', 0, [], undefined, 0, options)\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(obj, replacer, spacer)\n    } else {\n      res = JSON.stringify(obj, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction setReplace (replace, val, k, parent) {\n  var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n  if (propertyDescriptor.get !== undefined) {\n    if (propertyDescriptor.configurable) {\n      Object.defineProperty(parent, k, { value: replace })\n      arr.push([parent, k, val, propertyDescriptor])\n    } else {\n      replacerStack.push([val, k, replace])\n    }\n  } else {\n    parent[k] = replace\n    arr.push([parent, k, val])\n  }\n}\n\nfunction decirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      var keys = Object.keys(val)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        decirc(val[key], key, i, stack, val, depth, options)\n      }\n    }\n    stack.pop()\n  }\n}\n\n// Stable-stringify\nfunction compareFunction (a, b) {\n  if (a < b) {\n    return -1\n  }\n  if (a > b) {\n    return 1\n  }\n  return 0\n}\n\nfunction deterministicStringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  var tmp = deterministicDecirc(obj, '', 0, [], undefined, 0, options) || obj\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(tmp, replacer, spacer)\n    } else {\n      res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    // Ensure that we restore the object as it was.\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction deterministicDecirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n    try {\n      if (typeof val.toJSON === 'function') {\n        return\n      }\n    } catch (_) {\n      return\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {}\n      var keys = Object.keys(val).sort(compareFunction)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        deterministicDecirc(val[key], key, i, stack, val, depth, options)\n        tmp[key] = val[key]\n      }\n      if (typeof parent !== 'undefined') {\n        arr.push([parent, k, val])\n        parent[k] = tmp\n      } else {\n        return tmp\n      }\n    }\n    stack.pop()\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as replaced value\nfunction replaceGetterValues (replacer) {\n  replacer =\n    typeof replacer !== 'undefined'\n      ? replacer\n      : function (k, v) {\n        return v\n      }\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i]\n        if (part[1] === key && part[0] === val) {\n          val = part[2]\n          replacerStack.splice(i, 1)\n          break\n        }\n      }\n    }\n    return replacer.call(this, key, val)\n  }\n}\n",null,"// for backwards compat\nmodule.exports = require('json-rpc-engine/src/createScaffoldMiddleware')\n","const SafeEventEmitter = require('@metamask/safe-event-emitter').default\nconst createScaffoldMiddleware = require('eth-json-rpc-middleware/scaffold')\nconst { createAsyncMiddleware } = require('json-rpc-engine')\nconst createFilterMiddleware = require('./index.js')\nconst { unsafeRandomBytes, incrementHexInt } = require('./hexUtils.js')\nconst getBlocksForRange = require('./getBlocksForRange.js')\n\nmodule.exports = createSubscriptionMiddleware\n\n\nfunction createSubscriptionMiddleware({ blockTracker, provider }) {\n  // state and utilities for handling subscriptions\n  const subscriptions = {}\n  const filterManager = createFilterMiddleware({ blockTracker, provider })\n\n  // internal flag\n  let isDestroyed = false\n\n  // create subscriptionManager api object\n  const events = new SafeEventEmitter()\n  const middleware = createScaffoldMiddleware({\n    eth_subscribe: createAsyncMiddleware(subscribe),\n    eth_unsubscribe: createAsyncMiddleware(unsubscribe),\n  })\n  middleware.destroy = destroy\n  return { events, middleware }\n\n  async function subscribe(req, res) {\n\n    if (isDestroyed) throw new Error(\n      'SubscriptionManager - attempting to use after destroying'\n    )\n\n    const subscriptionType = req.params[0]\n    // subId is 16 byte hex string\n    const subId = unsafeRandomBytes(16)\n\n    // create sub\n    let sub\n    switch (subscriptionType) {\n      case 'newHeads':\n        sub = createSubNewHeads({ subId })\n        break\n      case 'logs':\n        const filterParams = req.params[1]\n        const filter = await filterManager.newLogFilter(filterParams)\n        sub = createSubFromFilter({ subId, filter })\n        break\n      default:\n        throw new Error(`SubscriptionManager - unsupported subscription type \"${subscriptionType}\"`)\n\n    }\n    subscriptions[subId] = sub\n\n    res.result = subId\n    return\n\n    function createSubNewHeads({ subId }) {\n      const sub = {\n        type: subscriptionType,\n        destroy: async () => {\n          blockTracker.removeListener('sync', sub.update)\n        },\n        update: async ({ oldBlock, newBlock }) => {\n          // for newHeads\n          const toBlock = newBlock\n          const fromBlock = incrementHexInt(oldBlock)\n          const rawBlocks = await getBlocksForRange({ provider, fromBlock, toBlock })\n          const results = rawBlocks.map(normalizeBlock)\n          results.forEach((value) => {\n            _emitSubscriptionResult(subId, value)\n          })\n        }\n      }\n      // check for subscription updates on new block\n      blockTracker.on('sync', sub.update)\n      return sub\n    }\n\n    function createSubFromFilter({ subId, filter }){\n      filter.on('update', result => _emitSubscriptionResult(subId, result))\n      const sub = {\n        type: subscriptionType,\n        destroy: async () => {\n          return await filterManager.uninstallFilter(filter.idHex)\n        },\n      }\n      return sub\n    }\n  }\n\n  async function unsubscribe(req, res) {\n\n    if (isDestroyed) throw new Error(\n      'SubscriptionManager - attempting to use after destroying'\n    )\n\n    const id = req.params[0]\n    const subscription = subscriptions[id]\n    // if missing, return \"false\" to indicate it was not removed\n    if (!subscription) {\n      res.result = false\n      return\n    }\n    // cleanup subscription\n    delete subscriptions[id]\n    await subscription.destroy()\n    res.result = true\n  }\n\n  function _emitSubscriptionResult(filterIdHex, value) {\n    events.emit('notification', {\n      jsonrpc: '2.0',\n      method: 'eth_subscription',\n      params: {\n        subscription: filterIdHex,\n        result: value,\n      },\n    })\n  }\n\n  function destroy () {\n    events.removeAllListeners()\n    for (const id in subscriptions) {\n      subscriptions[id].destroy()\n      delete subscriptions[id]\n    }\n    isDestroyed = true\n  }\n}\n\nfunction normalizeBlock(block) {\n  return {\n    hash: block.hash,\n    parentHash: block.parentHash,\n    sha3Uncles: block.sha3Uncles,\n    miner: block.miner,\n    stateRoot: block.stateRoot,\n    transactionsRoot: block.transactionsRoot,\n    receiptsRoot: block.receiptsRoot,\n    logsBloom: block.logsBloom,\n    difficulty: block.difficulty,\n    number: block.number,\n    gasLimit: block.gasLimit,\n    gasUsed: block.gasUsed,\n    nonce: block.nonce,\n    mixHash: block.mixHash,\n    timestamp: block.timestamp,\n    extraData: block.extraData,\n  }\n}\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;"],"sourceRoot":""}